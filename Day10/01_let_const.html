<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>JS es6 let, const</title>
    </head>
    <body>
        
        <script>

            // ECMAscript6( 2015년에 발표된 버전 : 줄여서 ES6 또는 ES2015 라고 표기 ) - 현재(2022.12.07) ES8버전까지 있음

            // 1. 변수 선언 키워드 추가 : let, const

            // 기존의 var 변수
            var a= 10;
            document.write(a+"<br>");

            // 같은 이름의 변수를 또 만들면?
            var a= 20; // error 아님. var 키워드 무시됨
            document.write(a+"<br>");

            // 그래서 새로운 let 키워드 변수 선언
            let b= 100;
            document.write(b+"<br>");

            // 같은 이름의 변수를 또 만들면?
            //let b= 200; // 문법적 error - 스크립트가 시작도 안됨
            
            // 즉, let 은 의도치 않게 같은 이름의 변수를 또 선언하는 실수를 방지해 줌
            // let 도 변수를 만드는 키워드 이므로 변수의 값 변경은 가능함
            b= 200;
            document.write(b+"<br>");

            // const 는 상수화된 변수 - 즉, 값 변경이 불가능한 변수
            const c= 1000;
            document.write(c+"<br>");

            // 상수라서 값 변경이 불가능
            //c= 2000; // 문법적 에러는 아니라서 스크립트 자체가 멈추진 않음
            //document.write(c+"<br>");

            // 당연히 const도 let처럼 같은 이름의 변수선언 불가능 - 문법적 error
            //const c= 2000;

            // let 과 const 도 자료형은 자유롭게 변경하며 저장 가능함 [동적 타입언어]
            let d="aaa";
            document.write(typeof(d)+"<br>");

            d= 10;
            document.write(typeof(d)+"<br>");

            d= new Date();
            document.write(typeof(d)+"<br>");

            document.write("<hr>");
            
            // var 과 let, const 의 두번째 차이점
            // 변수를 인식하는 범위 차이 - 지역에 대한 해석 차이
            // var변수는 지역을 함수 단위로 인식함
            // let, const 는 지역을 {} 단위로 인식함

            // {} 블럭에 대한 지역성 여부를 확인
            if(true){
                var k= 50; // var 변수는 함수영역이 아니면 지역변수로 인식하지 않음
                document.write(k+"<br>");
            }
            document.write(k+"<br>"); // if문 {}안에 있는 var 변수 인식함

            if(true){
                let m= 20; // let 변수는 {}를 지역으로 인식해서 지역변수가 됨
                document.write(m+"<br>");
            }
            //document.write(m+"<br>");  // if문 {}안에 있는 let 변수 인식못함 - error. 여기서부터 프로그램 동작안함

            // 함수는 var, let, const 모두 지역으로 인식함
            function aaa(){
                var p= 10; // 지역변수
                let s= "aa"; // 지역변수
                const t= true // 지역변수
                document.write(p+s+t+"<br>");
            }
            aaa()

            // 반복문 사용할 때
            for(var i=0; i<3; i++){
                document.write("aaa<br>");
            }
            document.write("i:"+i+"<br>"); // for문 안에 있는 var변수 i 또한 지역변수가 아니므로 인식 가능
            
            for(let j=0; j<3; j++){
                document.write("aaa<br>");
            }
            document.write("j:"+j+"<br>"); // for문 안에 있는 var변수 j는 지역변수이므로 인식 불가능

        </script>

    </body>
</html>